<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>An R package with Access Control module • rAccess</title>
<script src="deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="deps/font-awesome-6.5.2/css/all.min.css" rel="stylesheet">
<link href="deps/font-awesome-6.5.2/css/v4-shims.min.css" rel="stylesheet">
<script src="deps/headroom-0.11.0/headroom.min.js"></script><script src="deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="deps/search-1.0.0/fuse.min.js"></script><script src="deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="pkgdown.js"></script><meta property="og:title" content="An R package with Access Control module">
<meta name="description" content="rAccess is an R package with functions and modules to support access control in Shiny apps.">
<meta property="og:description" content="rAccess is an R package with functions and modules to support access control in Shiny apps.">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="index.html">rAccess</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.1.1.1</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="reference/index.html">Reference</a></li>
<li class="nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="articles/Tutorial.html">Tutorial</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-home">
<div class="row">
  <main id="main" class="col-md-9"><div class="section level1">
<div class="page-header"><h1 id="raccess-">rAccess <img src="reference/figures/raccess.png" align="right" height="200" style="float:right; height:100px;"><a class="anchor" aria-label="anchor" href="#raccess-"></a>
</h1></div>
<p><a href="https://github.com/USER/REPO/actions/workflows/test-coverage.yaml" class="external-link"><img src="https://raw.githubusercontent.com/USER/REPO/coverage/badges/coverage.svg" alt="Test coverage"></a></p>
<p><code>rAccess</code> is an R package that offers a flexible framework for in-app access control, allowing local and/or remote storage, organization, and retrieval of access lists. It features a pluggable shiny module to create and manage access lists for individual Shiny applications. It is built on top of the Posit Connect Access Management, which means no credentials are collected or stored.</p>
<p>A friendly user interface enables the app Admin to easily manage user access permission for respective access units.</p>
<p>The parameters to the <code>rAccess</code> object can either be passed directly as arguments to the new instance of <code>rAccess</code> or could be defined within a configuration yaml file.</p>
<div class="section level2">
<h2 id="installation">Installation<a class="anchor" aria-label="anchor" href="#installation"></a>
</h2>
<pre><code><span><span class="fu"><a href="https://rdrr.io/r/utils/install.packages.html" class="external-link">install.packages</a></span><span class="op">(</span><span class="st">"rAccess"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="usage">Usage<a class="anchor" aria-label="anchor" href="#usage"></a>
</h2>
<p><code>rAccess</code> includes server and ui modules for access management tab which could be used within a main Shiny web application.</p>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://johnsonandjohnson.github.io/rAccess">rAccess</a></span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="adding-raccess-config-file">Adding rAccess config file<a class="anchor" aria-label="anchor" href="#adding-raccess-config-file"></a>
</h2>
<p>The package includes a template configuration file, making it simple for users to get started. It contains all the necessary parameters for rAccess and can be customized to suit individual needs.</p>
<p>To add a config file template to your project directory, use:</p>
<pre><code><span><span class="fu">rAccess</span><span class="fu">::</span><span class="fu"><a href="reference/use_config.html">use_config</a></span><span class="op">(</span>file_name <span class="op">=</span> <span class="st">"rAccess.yml"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level2">
<h2 id="config-file-structure">Config file structure<a class="anchor" aria-label="anchor" href="#config-file-structure"></a>
</h2>
<pre><code>module: rAccess
parameters:
  app_name:                 # application name *
  board_type:               # local/rconnect/s3 *
  access_mode:              # default/single unit
  unit_display:             # dropdown/switch
  switch_size:              # default/mini/small/normal/large
  user_df: !expr tibble::tribble(
    ~userid, ~username,
    "UserID", "User Name")        # Sample user_df
  use_rconnect_users: TRUE        # TRUE - combine rconnect userlist with user_df
  secure_mode: FALSE              # TRUE - Access will be denied to users with no access to atleast one panel/unit
  local_board_path:               # Path to save local pin_board when board_type = "local"
  s3_bucket:                      # s3 bucket name when board_type = "s3"
  s3_access_key:                  # s3 access key when board_type = "s3"
  s3_secret_key:                  # s3 secret key when board_type = "s3"
  verbose: FALSE                  # If TRUE Prints all data base changes in log

data:                             # Study data path if available
  datapath1:
  datapath2:

panel_str:                        # Panel structure to be defined by the developer
  - access_panel: ADMIN           # Every App should have an ADMIN panel.(mandatory)

  - access_panel:                 # Access Panel name *
    access_units:
      - unit:                     # Access unit name  *
      - unit:                     # Access unit name

  - access_panel:                 # Access Panel name
    access_units:
      - unit:
        data:                     # datapath associated with access unit
      - unit:
        data:                     # datapath associated with access unit</code></pre>
<p><strong>For detailed description on the config file components refer vignette : Tutorial.</strong></p>
<div class="section level3">
<h3 id="creating-a-new-instance-of-raccess">Creating a new instance of rAccess<a class="anchor" aria-label="anchor" href="#creating-a-new-instance-of-raccess"></a>
</h3>
<p>Once the configuration file is ready the user can create a new instance of rAccess as below:</p>
<pre><code><span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"UserID"</span>, config <span class="op">=</span> <span class="st">"rAccess.yml"</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-a-new-instance-of-raccess-without-a-config-file">Creating a new instance of rAccess without a config file<a class="anchor" aria-label="anchor" href="#creating-a-new-instance-of-raccess-without-a-config-file"></a>
</h3>
<p>If there is no config file in place, user can also pass the rAccess parameters as arguments to the new instance of the <code>rAccess</code> object.</p>
<pre><code><span><span class="va">access_panels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>  `ADMIN` <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  `Access Panel 1` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Unit 1"</span>, <span class="st">"Unit 2"</span><span class="op">)</span>,</span>
<span>  `Access Panel 2` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Unit 3"</span>, <span class="st">"Unit 4"</span><span class="op">)</span>,</span>
<span>  `Access Panel 3` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Unit 5"</span>, <span class="st">"Unit 6"</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># User list</span></span>
<span><span class="va">user_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">userid</span>, <span class="op">~</span><span class="va">username</span>,</span>
<span>  <span class="st">"UserID1"</span>, <span class="st">"User Name 1"</span>,</span>
<span>  <span class="st">"UserID2"</span>, <span class="st">"User Name 2"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"local"</span>,</span>
<span>                      local_board_path <span class="op">=</span> <span class="st">"./data/"</span>,</span>
<span>                      pin_name <span class="op">=</span> <span class="va">pin_name</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      user_df <span class="op">=</span> <span class="va">user_df</span><span class="op">)</span></span>
<span></span>
<span><span class="va">newIAM</span><span class="op">$</span><span class="va">access_panels</span></span>
<span><span class="va">newIAM</span><span class="op">$</span><span class="va">access_units</span></span>
<span><span class="va">newIAM</span><span class="op">$</span><span class="va">access_mode</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="board_type-options-in-raccess">board_type options in rAccess<a class="anchor" aria-label="anchor" href="#board_type-options-in-raccess"></a>
</h3>
<p>There three pin board options available for the users: “local”, “s3”, and “rconnect”. This can be specified with the parameter <code>board_type</code> of the rAccess object.</p>
<ul>
<li>
<code>"local"</code> : Local folder will be used as a pin_board. The user must also specify the “local_board_path”.</li>
</ul>
<pre><code><span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"local"</span>,</span>
<span>                      local_board_path <span class="op">=</span> <span class="st">"./data/"</span>,</span>
<span>                      pin_name <span class="op">=</span> <span class="va">pin_name</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      user_df <span class="op">=</span> <span class="va">user_df</span><span class="op">)</span></span></code></pre>
<ul>
<li>
<code>"s3"</code> : S3 bucket will be used as a pin_board. When board_type is “s3”, the user must give the s3 credentials.</li>
</ul>
<pre><code>newIAM &lt;- rAccess$new(user = "&lt;userid&gt;",
                      app_name = "testApp",
                      board_type = "s3",
                      s3_bucket: ""
                      s3_access_key: ""
                      s3_secret_key: "",
                      access_panels = access_panels,
                      access_mode = "default",
                      user_df = user_df)</code></pre>
<ul>
<li>
<code>"rconnect"</code> : Posit Connect pin_board will be utilized. If the pin_board does not already exist, it will be created and deployed on the same Posit Connect server where the app is hosted.</li>
</ul>
<pre><code><span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"rconnect"</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      user_df <span class="op">=</span> <span class="va">user_df</span><span class="op">)</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="creating-user-list">Creating user list<a class="anchor" aria-label="anchor" href="#creating-user-list"></a>
</h3>
<p>The user list for rAccess could either be supplied as the <code>user_df</code> argument of the <code>rAccess</code> object or could be fetched from the rconnect user list.</p>
<p><strong>Creating user_df</strong>*</p>
<pre><code><span><span class="va">user_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span>  <span class="op">~</span><span class="va">userid</span>, <span class="op">~</span><span class="va">username</span>,</span>
<span>  <span class="st">"UserId1"</span>, <span class="st">"User Name 1"</span>,</span>
<span>  <span class="st">"UserId2"</span>, <span class="st">"User Name 2"</span>,</span>
<span>  <span class="st">"UserId3"</span>, <span class="st">"User Name 3"</span>,</span>
<span>  <span class="st">"UserId4"</span>, <span class="st">"User Name 4"</span>,</span>
<span>  <span class="st">"UserId5"</span>, <span class="st">"User Name 5"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"local"</span>,</span>
<span>                      local_board_path <span class="op">=</span> <span class="st">"./data/"</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      user_df <span class="op">=</span> <span class="va">user_df</span><span class="op">)</span></span></code></pre>
<p><strong>Using API to fetch user data</strong> If you have access to your organization’s user directory via an API, you might want to first fetch the data and then prepare the user_df, similar to the example below</p>
<pre><code><span><span class="va">api_url</span> <span class="op">&lt;-</span> <span class="st">"&lt;user-directory-api&gt;"</span></span>
<span><span class="va">users</span> <span class="op">&lt;-</span> <span class="fu">jsonlite</span><span class="fu">::</span><span class="fu"><a href="https://jeroen.r-universe.dev/jsonlite/reference/fromJSON.html" class="external-link">fromJSON</a></span><span class="op">(</span><span class="va">api_url</span><span class="op">)</span></span>
<span><span class="va">user_df</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tibble.html" class="external-link">tibble</a></span><span class="op">(</span>userid <span class="op">=</span> <span class="va">users</span><span class="op">$</span><span class="va">USERID</span>, username <span class="op">=</span> <span class="va">users</span><span class="op">$</span><span class="va">USERNAME</span><span class="op">)</span></span>
<span></span>
<span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"local"</span>,</span>
<span>                      local_board_path <span class="op">=</span> <span class="st">"./data/"</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      user_df <span class="op">=</span> <span class="va">user_df</span><span class="op">)</span></span></code></pre>
<p><strong>Using User list from rconnect</strong></p>
<p>User list will be automatically fetched from the Posit Connect servers when deployed. Users must make sure that <code>use_rconnect_users</code> parameter is set as <code>TRUE</code> to get users from Posit Connect.</p>
<pre><code><span><span class="co"># When deployed</span></span>
<span><span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span>user <span class="op">=</span> <span class="st">"&lt;userid&gt;"</span>,</span>
<span>                      app_name <span class="op">=</span> <span class="st">"testApp"</span>,</span>
<span>                      board_type <span class="op">=</span> <span class="st">"rconnect"</span>,</span>
<span>                      access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                      access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                      use_rconnect_users <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre>
</div>
</div>
<div class="section level2">
<h2 id="example">Example<a class="anchor" aria-label="anchor" href="#example"></a>
</h2>
<pre><code><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/rstudio/DT" class="external-link">DT</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://pins.rstudio.com/" class="external-link">pins</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://shiny.posit.co/" class="external-link">shiny</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://johnsonandjohnson.github.io/rAccess">rAccess</a></span><span class="op">)</span></span>
<span></span>
<span><span class="va">ui</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/navbarPage.html" class="external-link">navbarPage</a></span><span class="op">(</span></span>
<span>  id <span class="op">=</span> <span class="st">"mainpage"</span>,</span>
<span>  title <span class="op">=</span> <span class="st">"Demo!"</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span></span>
<span>    <span class="st">"Plot"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarLayout</a></span><span class="op">(</span></span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">sidebarPanel</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/radioButtons.html" class="external-link">radioButtons</a></span><span class="op">(</span></span>
<span>          <span class="st">"plotType"</span>, <span class="st">"Plot type"</span>,</span>
<span>          <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Scatter"</span> <span class="op">=</span> <span class="st">"p"</span>, <span class="st">"Line"</span> <span class="op">=</span> <span class="st">"l"</span><span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>      <span class="op">)</span>,</span>
<span>      <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/sidebarLayout.html" class="external-link">mainPanel</a></span><span class="op">(</span></span>
<span>        <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/plotOutput.html" class="external-link">plotOutput</a></span><span class="op">(</span><span class="st">"plot"</span><span class="op">)</span></span>
<span>      <span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span></span>
<span>    <span class="st">"Summary"</span>,</span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/textOutput.html" class="external-link">verbatimTextOutput</a></span><span class="op">(</span><span class="st">"summary"</span><span class="op">)</span></span>
<span>  <span class="op">)</span>,</span>
<span>  <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/tabPanel.html" class="external-link">tabPanel</a></span><span class="op">(</span></span>
<span>    <span class="st">"Access Control"</span>,</span>
<span>    <span class="fu">rAccess</span><span class="fu">::</span><span class="fu"><a href="reference/module_iam_ui.html">module_iam_ui</a></span><span class="op">(</span><span class="st">"iam"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="va">server</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">input</span>, <span class="va">output</span>, <span class="va">session</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="va">access_panels</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span></span>
<span>    `ADMIN` <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>    `View` <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"view-plots"</span>, <span class="st">"view-summary"</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">user_df</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html" class="external-link">data.frame</a></span><span class="op">(</span></span>
<span>    userid <span class="op">=</span> <span class="st">"UserID"</span>,</span>
<span>    username <span class="op">=</span> <span class="st">"User Name"</span></span>
<span>  <span class="op">)</span></span>
<span>  <span class="va">user_id</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/ifelse.html" class="external-link">ifelse</a></span><span class="op">(</span><span class="op">!</span><span class="fu"><a href="https://rdrr.io/r/base/exists.html" class="external-link">exists</a></span><span class="op">(</span><span class="st">"session$user"</span><span class="op">)</span>, <span class="st">"UserID"</span>, <span class="va">session</span><span class="op">$</span><span class="va">user</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Create new instance of rAccess</span></span>
<span>  <span class="va">newIAM</span> <span class="op">&lt;-</span> <span class="va"><a href="reference/rAccess.html">rAccess</a></span><span class="op">$</span><span class="fu">new</span><span class="op">(</span> user <span class="op">=</span> <span class="va">user_id</span>,</span>
<span>                         board_type <span class="op">=</span> <span class="st">"local"</span>,</span>
<span>                         local_board_path <span class="op">=</span> <span class="st">"./data/"</span>,</span>
<span>                         app_name <span class="op">=</span> <span class="st">"test2"</span>,</span>
<span>                         access_panels <span class="op">=</span> <span class="va">access_panels</span>,</span>
<span>                         access_mode <span class="op">=</span> <span class="st">"default"</span>,</span>
<span>                         switch_size <span class="op">=</span> <span class="st">"small"</span>,</span>
<span>                         unit_display <span class="op">=</span> <span class="st">"dropdown"</span>,</span>
<span>                         user_df <span class="op">=</span> <span class="va">user_df</span>,</span>
<span>                         secure_mode <span class="op">=</span> <span class="cn">FALSE</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">newIAM</span><span class="op">$</span><span class="fu">no_admin</span><span class="op">(</span><span class="op">)</span> <span class="op">||</span> <span class="va">newIAM</span><span class="op">$</span><span class="fu">is_admin</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">showTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Access Control"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">hideTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Access Control"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="fu"><a href="reference/module_iam_server.html">module_iam_server</a></span><span class="op">(</span><span class="st">"iam"</span>, <span class="va">newIAM</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Get panels with access</span></span>
<span>  <span class="va">user_access_list</span> <span class="op">&lt;-</span> <span class="va">newIAM</span><span class="op">$</span><span class="fu">get_user_accesslist</span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span>  <span class="co"># Show/Hide: plot tab</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"view-plots"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">user_access_list</span><span class="op">$</span><span class="va">View</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">hideTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Plot"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">showTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Plot"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="co"># Show/Hide: Summary Tab</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="op">!</span><span class="st">"view-summary"</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="va">user_access_list</span><span class="op">$</span><span class="va">View</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">hideTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Summary"</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/showTab.html" class="external-link">showTab</a></span><span class="op">(</span><span class="st">"mainpage"</span>, target <span class="op">=</span> <span class="st">"Summary"</span><span class="op">)</span></span>
<span>  <span class="op">}</span></span>
<span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">plot</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPlot.html" class="external-link">renderPlot</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">cars</span>, type <span class="op">=</span> <span class="va">input</span><span class="op">$</span><span class="va">plotType</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span>  <span class="va">output</span><span class="op">$</span><span class="va">summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/shiny/man/renderPrint.html" class="external-link">renderPrint</a></span><span class="op">(</span><span class="op">{</span></span>
<span>    <span class="fu"><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary</a></span><span class="op">(</span><span class="va">cars</span><span class="op">)</span></span>
<span>  <span class="op">}</span><span class="op">)</span></span>
<span><span class="op">}</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/pkg/shiny/man/shinyApp.html" class="external-link">shinyApp</a></span><span class="op">(</span><span class="va">ui</span>, <span class="va">server</span><span class="op">)</span></span></code></pre>
</div>
</div>
  </main><aside class="col-md-3"><div class="license">
<h2 data-toc-skip>License</h2>
<ul class="list-unstyled">
<li>Apache License (&gt;= 2)</li>
</ul>
</div>


<div class="citation">
<h2 data-toc-skip>Citation</h2>
<ul class="list-unstyled">
<li><a href="authors.html#citation">Citing rAccess</a></li>
</ul>
</div>

<div class="developers">
<h2 data-toc-skip>Developers</h2>
<ul class="list-unstyled">
<li>Peyman Eshghi <br><small class="roles"> Author, maintainer </small>   </li>
<li>Nandu Krishnan <br><small class="roles"> Author </small>   </li>
<li>Nadia Abraham <br><small class="roles"> Author </small>   </li>
<li>Johnson &amp; Johnson Innovative Medicine <br><small class="roles"> Copyright holder, funder </small>   </li>
<li><a href="authors.html">More about authors...</a></li>
</ul>
</div>



  </aside>
</div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Peyman Eshghi, Nandu Krishnan, Nadia Abraham, Johnson &amp; Johnson Innovative Medicine.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.3.</p>
</div>

    </footer>
</div>





  </body>
</html>
